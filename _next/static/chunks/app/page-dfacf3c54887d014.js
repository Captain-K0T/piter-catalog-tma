(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1826:(e,t,r)=>{Promise.resolve().then(r.bind(r,7818))},5146:(e,t,r)=>{"use strict";r.d(t,{L:()=>s});let s=[{name:"#авторская_кухня",emoji:"\uD83C\uDFA8"},{name:"#азиатская_кухня",emoji:"\uD83C\uDF5C"},{name:"#американская_кухня",emoji:"\uD83C\uDF54"},{name:"#бельгийская_кухня",emoji:"\uD83E\uDDC7"},{name:"#восточная_кухня",emoji:"\uD83E\uDDC6"},{name:"#гавайская_кухня",emoji:"\uD83C\uDF4D"},{name:"#грузинская_кухня",emoji:"\uD83C\uDDEC\uD83C\uDDEA"},{name:"#европейская_кухня",emoji:"\uD83C\uDDEA\uD83C\uDDFA"},{name:"#израильская_кухня",emoji:"\uD83C\uDDEE\uD83C\uDDF1"},{name:"#индийская_кухня",emoji:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"#итальянская_кухня",emoji:"\uD83C\uDF55"},{name:"#мексиканская_кухня",emoji:"\uD83C\uDF2E"},{name:"#русская_кухня",emoji:"\uD83C\uDDF7\uD83C\uDDFA"},{name:"#северная_кухня",emoji:"❄️"},{name:"#средиземноморская_кухня",emoji:"\uD83E\uDD90"},{name:"#турецкая_кухня",emoji:"\uD83C\uDDF9\uD83C\uDDF7"},{name:"#французская_кухня",emoji:"\uD83C\uDDEB\uD83C\uDDF7"},{name:"#бар",emoji:"\uD83C\uDF78"},{name:"#завтраки",emoji:"\uD83C\uDF73"},{name:"#стритфуд",emoji:"\uD83C\uDF2D"},{name:"#кальянная",emoji:"\uD83D\uDCA8"},{name:"#кофейня",emoji:"☕"},{name:"#пространства",emoji:"\uD83C\uDFDE️"},{name:"#За_городом",emoji:"\uD83D\uDE97"}]},6957:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});let s="/piter-catalog-tma";async function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=await fetch("".concat(s,"/database_enriched.csv")),r=(await t.text()).split("\n").map(e=>{let t=[],r="",s=!1;for(let a=0;a<e.length;a++){let l=e[a],n=e[a+1];'"'===l?s&&'"'===n?(r+='"',a++):s=!s:","!==l||s?r+=l:(t.push(r.trim()),r="")}return t.push(r.trim()),t}).filter(e=>e.length>1&&e[0]),a=(function(e){if(0===e.length)return[];let t=e[0],r=[];for(let s=1;s<e.length;s++){let a=e[s],l={};for(let e=0;e<t.length;e++)l[t[e]]=a[e]||"";r.push(l)}return r})(r).map(e=>{let t=[];for(let r=1;r<=10;r++){let a=e["photo_path_".concat(r)];a&&""!==a.trim()&&t.push("".concat(s,"/posts/").concat(a))}let r=[];for(let t=1;t<=6;t++){let s=e["hashtag_".concat(t)];s&&""!==s.trim()&&r.push(s)}let a=null,l=e.average_check_2gis||e.average_check_2gis||"";if(l&&""!==l.trim()){let e=l.replace(/[^\d]/g,"");a=e?parseInt(e,10):null}return{id:parseInt(e.id),telegram_link:e.telegram_link,twogis_link:e.link_1,restaurant_link:e.link_2,title_2gis:e.title_2gis,rating_2gis:e.rating_2gis,average_check_2gis:a,photo_path:t,hashtags:r,text_summary:(e=>{if(!e)return"";let t=e.replace(/<[^>]+>/g," ").split(/[.!?]+\s/).filter(Boolean);return t.slice(0,2).join(". ")+(t.length>2?"...":".")})(e.text_html),text_html:e.text_html}}).sort((e,t)=>t.id-e.id);return e?a.slice(0,e):a}catch(e){return console.error("Error loading restaurants:",e),[]}}},7818:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5155),a=r(2115),l=r(6957);let n=e=>{let{searchTerm:t,setSearchTerm:r,suggestions:l}=e,[n,i]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"relative w-full max-w-full",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,s.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,s.jsx)("input",{type:"search",placeholder:"Поиск ресторанов...",value:t,onChange:e=>r(e.target.value),onFocus:()=>i(!0),onBlur:()=>setTimeout(()=>i(!1),150),className:"w-full h-9 pl-9 pr-3 py-1 text-base rounded-md border border-gray-200 bg-[#f3f3f5] text-gray-900 outline-none transition-all focus:border-[#EC5E54] focus:ring-2 focus:ring-[#EC5E54]/20"})]}),n&&l.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-2 rounded-md shadow-xl max-w-full overflow-hidden border border-gray-200 bg-white",children:l.map(e=>(0,s.jsx)("div",{onClick:()=>{r(e.title_2gis),i(!1)},className:"px-4 py-3 cursor-pointer transition-colors hover:bg-gray-50",children:e.title_2gis},e.id))})]})};var i=r(5146);let o=e=>{let{activeCategory:t,onCategoryClick:r}=e;return(0,s.jsx)("div",{className:"w-full overflow-x-auto no-scrollbar",children:(0,s.jsxs)("div",{className:"flex gap-2 px-4 pb-4",children:[(0,s.jsx)("button",{onClick:()=>r(null),className:"inline-flex items-center justify-center rounded-md border px-3 py-1.5 text-sm font-medium whitespace-nowrap shrink-0 transition-colors ".concat(null===t?"bg-[#EC5E54] text-white border-transparent":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Все"}),i.L.map(e=>(0,s.jsxs)("button",{onClick:()=>r(e.name),className:"inline-flex items-center justify-center rounded-md border px-3 py-1.5 text-sm font-medium whitespace-nowrap shrink-0 transition-colors ".concat(t===e.name?"bg-[#EC5E54] text-white border-transparent":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:[e.emoji," ",e.name.replace(/#/g,"").replace(/_/g," ")]},e.name))]})})};var c=r(2619),m=r.n(c),d=r(8482);let h=e=>{let{tag:t,onTagClick:r}=e,a=t.replace(/#/g,"").replace(/_/g," ");return(0,s.jsx)("button",{onClick:()=>r(t),className:"inline-flex items-center justify-center rounded-md bg-[#f3f3f5] text-[#030213] px-2 py-0.5 text-xs font-medium whitespace-nowrap transition-colors hover:bg-gray-200",children:a})},x=e=>{let{restaurant:t,onTagClick:r}=e,{id:a,title_2gis:l,photo_path:n,hashtags:i,rating_2gis:o,average_check_2gis:c}=t,x=i.filter(e=>d.h.has(e)),u=i.filter(e=>!d.h.has(e));return(0,s.jsx)("div",{className:"rounded-xl border border-gray-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(m(),{href:"/restaurant/".concat(a),className:"shrink-0",children:(0,s.jsx)("div",{className:"w-24 h-32 rounded-lg overflow-hidden bg-gray-100",children:n&&n[0]?(0,s.jsx)("img",{src:n[0],alt:l,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"Нет фото"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsx)(m(),{href:"/restaurant/".concat(a),className:"flex-1 min-w-0",children:(0,s.jsx)("h3",{className:"text-lg font-medium line-clamp-2 hover:text-[#EC5E54] transition-colors",children:l})}),(0,s.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:[(0,s.jsx)("svg",{className:"w-4 h-4 fill-[#EC5E54]",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:o||"N/A"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[(0,s.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"}),(0,s.jsx)("path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"})]}),(0,s.jsx)("span",{children:c?"".concat(Math.round(c)," ₽"):"N/A"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[x.map(e=>(0,s.jsx)(h,{tag:e,onTagClick:r},e)),u.map(e=>(0,s.jsx)(h,{tag:e,onTagClick:r},e))]})]})]})})})};function u(){let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(null),[c,m]=(0,a.useState)(1),[d,h]=(0,a.useState)([]),[u,g]=(0,a.useState)(!0);(0,a.useEffect)(()=>{window.Telegram&&window.Telegram.WebApp&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand()),(0,l.B)().then(e=>{h(e),g(!1)})},[]);let p=(0,a.useMemo)(()=>{let t=d;return r&&(t=t.filter(e=>e.hashtags.includes(r))),e.length>0&&(t=t.filter(t=>t.title_2gis.toLowerCase().includes(e.toLowerCase()))),t},[e,r,d]),j=Math.ceil(p.length/10),f=(c-1)*10,_=p.slice(f,f+10),v=e=>{i(t=>t===e?null:e),m(1)},w=e=>{t(""),v(e)},b=(0,a.useMemo)(()=>e.length<2?[]:d.filter(t=>t.title_2gis.toLowerCase().includes(e.toLowerCase())).slice(0,5),[e,d]);return u?(0,s.jsx)("main",{className:"p-4 flex flex-col gap-4 items-center justify-center min-h-screen bg-white",children:(0,s.jsx)("div",{className:"text-xl text-gray-600",children:"Загрузка..."})}):(0,s.jsxs)("div",{className:"min-h-screen max-w-[480px] mx-auto bg-white",children:[(0,s.jsx)("header",{className:"sticky top-0 z-10 border-b border-gray-200 bg-white",children:(0,s.jsxs)("div",{className:"px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full shrink-0 bg-[#EC5E54] overflow-hidden",children:(0,s.jsx)("img",{src:"".concat("/piter-catalog-tma","/vp-logo.jpg"),alt:"Вкусный Питер",className:"w-full h-full object-cover"})}),(0,s.jsx)("h1",{className:"text-2xl font-medium text-gray-900",children:"Вкусный Питер"})]}),(0,s.jsx)(n,{searchTerm:e,setSearchTerm:e=>{t(e),m(1)},suggestions:b})]})}),(0,s.jsxs)("main",{className:"py-6 space-y-6",children:[(0,s.jsx)(o,{activeCategory:r,onCategoryClick:v}),(0,s.jsx)("div",{className:"px-4 space-y-3",children:_.length>0?_.map(e=>(0,s.jsx)(x,{restaurant:e,onTagClick:w},e.id)):(0,s.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Рестораны не найдены"})}),j>1&&(0,s.jsxs)("nav",{className:"flex justify-center items-center gap-1 px-4",children:[(0,s.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===c,className:"inline-flex items-center justify-center h-9 px-3 text-sm font-medium rounded-md border border-gray-200 transition-colors ".concat(1===c?"opacity-50 cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-gray-50 text-gray-700"),children:(0,s.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m15 18-6-6 6-6"})})}),(0,s.jsx)("div",{className:"flex gap-1",children:(()=>{let e=[];if(j<=5)for(let t=1;t<=j;t++)e.push(t);else c<=2?e.push(1,2,3,"ellipsis",j):c>=j-1?e.push(1,"ellipsis",j-2,j-1,j):e.push(1,"ellipsis",c,c+1,"ellipsis",j);return e})().map((e,t)=>(0,s.jsx)("div",{children:"ellipsis"===e?(0,s.jsx)("span",{className:"inline-flex items-center justify-center w-9 h-9 text-sm text-gray-500",children:"..."}):(0,s.jsx)("button",{onClick:()=>m(e),className:"inline-flex items-center justify-center w-9 h-9 text-sm font-medium rounded-md border transition-colors ".concat(c===e?"bg-[#EC5E54] text-white border-transparent":"border-gray-200 text-gray-700 hover:bg-gray-50"),children:e})},t))}),(0,s.jsx)("button",{onClick:()=>m(e=>Math.min(j,e+1)),disabled:c===j,className:"inline-flex items-center justify-center h-9 px-3 text-sm font-medium rounded-md border border-gray-200 transition-colors ".concat(c===j?"opacity-50 cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-gray-50 text-gray-700"),children:(0,s.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m9 18 6-6-6-6"})})})]})]})]})}},8482:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});let s=new Set(["#Автово","#Адмиралтейская","#Академическая","#Балтийская","#Бухарестская","#Василеостровская","#Владимирская","#Волковская","#Выборгская","#Горный_институт","#Горьковская","#Гостиный_Двор","#Гражданский_проспект","#Девяткино","#Достоевская","#Елизаровская","#Звёздная","#Звенигородская","#Кировский_завод","#Комендантский_проспект","#Крестовский_остров","#Купчино","#Ладожская","#Ленинский_проспект","#Лесная","#Лиговский_проспект","#Ломоносовская","#Маяковская","#Международная","#Московская","#Московские_Ворота","#Нарвская","#Невский_проспект","#Новочеркасская","#Обводный_канал","#Обухово","#Озерки","#Парк_Победы","#Парнас","#Петроградская","#Пионерская","#Площадь_Александра_Невского","#Площадь_Восстания","#Площадь_Ленина","#Площадь_Мужества","#Политехническая","#Приморская","#Пролетарская","#Проспект_Большевиков","#Проспект_Ветеранов","#Проспект_Просвещения","#Пушкинская","#Рыбацкое","#Садовая","#Сенная_площадь","#Спасская","#Спортивная","#Старая_Деревня","#Технологический_институт","#Удельная","#Улица_Дыбенко","#Фрунзенская","#Чёрная_речка","#Чернышевская","#Чкаловская","#Электросила"])}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=1826)),_N_E=e.O()}]);